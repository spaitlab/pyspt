# 信号处理仿真与应用 - 信号生成和预处理 - 波形生成

## MATLAB函数描述：pulstran

函数来源：[MATLAB pulstran](https://ww2.mathworks.cn/help/signal/ref/pulstran.html)

### 语法

y = pulstran(t,d,func)
y = pulstran(t,d,func,fs)
y = pulstran(t,d,p)
y = pulstran(___,intfunc)

### 说明

y = pulstran(t,d,func) generates a pulse train based on samples of a continuous function, func.

y = pulstran(t,d,func,fs) uses a sample rate of fs

y = pulstran(t,d,p) generates a pulse train that is the sum of multiple delayed interpolations of the prototype pulse in vector p.

y = pulstran(___,intfunc) specifies alternative interpolation methods. See interp1 for a list of available methods. You can use this parameter with any of the previous input syntaxes.

### 输入参数

t — Time values
vector

Time values at which func is evaluated, specified as a vector.

d — Offset
row vector | two-column matrix

Offset removed from the values of the array t, specified as a real vector. You can apply an optional gain factor to each delayed evaluation by specifying d as a two-column matrix, with offset defined in column 1 and associated gain in column 2. If you specify d as a row vector, the values are interpreted as delays only.

func — Continuous function
'rectpuls' | 'gauspuls' | 'tripuls' | function handle

p — Prototype pulse
vector

Prototype function, specified as a vector. The interval of p is given by [0,(length(p)-1)/fs], and its samples are identically zero outside this interval. By default, linear interpolation is used for generating delays.

fs — Sample rate
1 (default) | real scalar

Sample rate in Hz, specified as a real scalar.

intfunc — Interpolation method
'linear' (default) | 'nearest' | 'next' | 'previous' | 'pchip' | 'cubic' | 'v5cubic' | 'makima' | 'spline'

### 输出参数

y — Pulse train
vector

Pulse train generated by the function, returned as a vector.



## Python函数描述：pulstran

函数来源：自定义

```python
def rectpuls(t, width):
    """
    Rectangular pulse function.

    Parameters:
        t (array_like): Array of time values.
        width (float): Width of the pulse.

    Returns:
        array_like: Array containing the values of the rectangular pulse function.
    """
    return np.where(np.abs(t) <= width / 2, 1, 0)

def pulstran(t, d, x):
    """
    Generates a pulse train waveform.

    Parameters:
        t (array_like): Array of time values.
        d (array_like): Matrix of pulse delay and amplitude values.
        x (function): Pulse function.

    Returns:
        array_like: Array containing the pulse train waveform.
    """
    y = np.zeros_like(t)
    for delay, amplitude in d:
        y += amplitude * x(t - delay)
    return y

```



## Prompt 1 ： 生成 Python pulstran 函数

参考下面MATLAB代码的pulstran函数

```matlab
t = 0:1/1e3:60;
d = [0:2:60;sin(2*pi*0.05*(0:2:60))]';
x = @rectpuls;
y = pulstran(t,d,x);

plot(t,y)
hold off
xlabel('Time (s)')
ylabel('Waveform')
```

完成Python语言pulstran函数的编写，便于类似应用调用。

### LLM 生成 ： Python pulstran 函数

要编写一个类似于MATLAB中`pulstran`函数的Python函数，你可以使用NumPy库来处理数组和向量化操作。下面是一个Python版本的`pulstran`函数的示例实现：

```python
import numpy as np
import matplotlib.pyplot as plt

def pulstran(t, d, x):
    y = np.zeros_like(t)
    for i in range(len(d)):
        y += d[i, 1] * x(t - d[i, 0])
    return y

# 定义矩形脉冲函数
def rectpuls(t):
    return np.where(np.abs(t) <= 0.5, 1, 0)

# 生成时间序列
t = np.arange(0, 60, 1/1e3)

# 定义输入数据
d = np.column_stack((np.arange(0, 61, 2), np.sin(2*np.pi*0.05*np.arange(0, 61, 2))))

# 使用自定义的pulstran函数计算输出
y = pulstran(t, d, rectpuls)

# 绘制结果
plt.plot(t, y)
plt.xlabel('Time (s)')
plt.ylabel('Waveform')
plt.grid(True)
plt.show()

```

这段代码中定义了两个函数：

rectpuls：用于生成矩形脉冲函数。
pulstran：用于生成脉冲列车波形。
你可以将上述代码保存到一个Python文件中，然后在你的应用程序中调用这些函数来生成波形。